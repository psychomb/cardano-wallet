<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cardano.Wallet.DB</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Cardano.Wallet.DB.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-wallet-core-2019.10.16: The Wallet Backend for a Cardano node.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2018-2019 IOHK</td></tr><tr><th>License</th><td>Apache-2.0</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.Wallet.DB</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Interface</a></li><li><a href="#g:2">Checkpoints</a></li><li><a href="#g:3">Errors</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Database / Persistence layer for the wallet backend. This is where we define
 the interface allowing us to store and fetch various data on our wallets.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:DBLayer">DBLayer</a> m s t k = <a href="#v:DBLayer">DBLayer</a> {<ul class="subs"><li><a href="#v:createWallet">createWallet</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="Cardano-Wallet-Primitive-Model.html#t:Wallet" title="Cardano.Wallet.Primitive.Model">Wallet</a> s t -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:WalletMetadata" title="Cardano.Wallet.Primitive.Types">WalletMetadata</a> -&gt; [(<a href="Cardano-Wallet-Primitive-Types.html#t:Tx" title="Cardano.Wallet.Primitive.Types">Tx</a> t, <a href="Cardano-Wallet-Primitive-Types.html#t:TxMeta" title="Cardano.Wallet.Primitive.Types">TxMeta</a>)] -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a> m ()</li><li><a href="#v:removeWallet">removeWallet</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</li><li><a href="#v:listWallets">listWallets</a> :: m [<a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a>]</li><li><a href="#v:putCheckpoint">putCheckpoint</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="Cardano-Wallet-Primitive-Model.html#t:Wallet" title="Cardano.Wallet.Primitive.Model">Wallet</a> s t -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</li><li><a href="#v:readCheckpoint">readCheckpoint</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; m (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Cardano-Wallet-Primitive-Model.html#t:Wallet" title="Cardano.Wallet.Primitive.Model">Wallet</a> s t))</li><li><a href="#v:listCheckpoints">listCheckpoints</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; m [<a href="Cardano-Wallet-Primitive-Types.html#t:BlockHeader" title="Cardano.Wallet.Primitive.Types">BlockHeader</a>]</li><li><a href="#v:putWalletMeta">putWalletMeta</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:WalletMetadata" title="Cardano.Wallet.Primitive.Types">WalletMetadata</a> -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</li><li><a href="#v:readWalletMeta">readWalletMeta</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; m (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletMetadata" title="Cardano.Wallet.Primitive.Types">WalletMetadata</a>)</li><li><a href="#v:putTxHistory">putTxHistory</a> :: <a href="Cardano-Wallet-Primitive-Types.html#t:DefineTx" title="Cardano.Wallet.Primitive.Types">DefineTx</a> t =&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; [(<a href="Cardano-Wallet-Primitive-Types.html#t:Tx" title="Cardano.Wallet.Primitive.Types">Tx</a> t, <a href="Cardano-Wallet-Primitive-Types.html#t:TxMeta" title="Cardano.Wallet.Primitive.Types">TxMeta</a>)] -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</li><li><a href="#v:readTxHistory">readTxHistory</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:SortOrder" title="Cardano.Wallet.Primitive.Types">SortOrder</a> -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:Range" title="Cardano.Wallet.Primitive.Types">Range</a> <a href="Cardano-Wallet-Primitive-Types.html#t:SlotId" title="Cardano.Wallet.Primitive.Types">SlotId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Cardano-Wallet-Primitive-Types.html#t:TxStatus" title="Cardano.Wallet.Primitive.Types">TxStatus</a> -&gt; m [(<a href="Cardano-Wallet-Primitive-Types.html#t:Tx" title="Cardano.Wallet.Primitive.Types">Tx</a> t, <a href="Cardano-Wallet-Primitive-Types.html#t:TxMeta" title="Cardano.Wallet.Primitive.Types">TxMeta</a>)]</li><li><a href="#v:putPrivateKey">putPrivateKey</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; (k <a href="Cardano-Wallet-Primitive-AddressDerivation.html#v:RootK" title="Cardano.Wallet.Primitive.AddressDerivation">RootK</a> <a href="Cardano-Wallet-Primitive-AddressDerivation.html#t:XPrv" title="Cardano.Wallet.Primitive.AddressDerivation">XPrv</a>, <a href="Cardano-Wallet-Primitive-Types.html#t:Hash" title="Cardano.Wallet.Primitive.Types">Hash</a> &quot;encryption&quot;) -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</li><li><a href="#v:readPrivateKey">readPrivateKey</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; m (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (k <a href="Cardano-Wallet-Primitive-AddressDerivation.html#v:RootK" title="Cardano.Wallet.Primitive.AddressDerivation">RootK</a> <a href="Cardano-Wallet-Primitive-AddressDerivation.html#t:XPrv" title="Cardano.Wallet.Primitive.AddressDerivation">XPrv</a>, <a href="Cardano-Wallet-Primitive-Types.html#t:Hash" title="Cardano.Wallet.Primitive.Types">Hash</a> &quot;encryption&quot;))</li><li><a href="#v:rollbackTo">rollbackTo</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:SlotId" title="Cardano.Wallet.Primitive.Types">SlotId</a> -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</li><li><a href="#v:prune">prune</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</li><li><a href="#v:withLock">withLock</a> :: <span class="keyword">forall</span> e a. <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e m a -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e m a</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:DBFactory">DBFactory</a> m s t k = <a href="#v:DBFactory">DBFactory</a> {<ul class="subs"><li><a href="#v:withDatabase">withDatabase</a> :: <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; (<a href="Cardano-Wallet-DB.html#t:DBLayer" title="Cardano.Wallet.DB">DBLayer</a> m s t k -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li><a href="#v:removeDatabase">removeDatabase</a> :: <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:PrimaryKey">PrimaryKey</a> key = <a href="#v:PrimaryKey">PrimaryKey</a> key</li><li class="src short"><a href="#v:cleanDB">cleanDB</a> :: <a href="../base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Cardano-Wallet-DB.html#t:DBLayer" title="Cardano.Wallet.DB">DBLayer</a> m s t k -&gt; m ()</li><li class="src short"><a href="#v:sparseCheckpoints">sparseCheckpoints</a> :: <a href="Data-Quantity.html#t:Quantity" title="Data.Quantity">Quantity</a> &quot;block&quot; <a href="../base-4.12.0.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a> -&gt; <a href="Data-Quantity.html#t:Quantity" title="Data.Quantity">Quantity</a> &quot;block&quot; <a href="../base-4.12.0.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a> -&gt; [<a href="../base-4.12.0.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a>]</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ErrNoSuchTransaction">ErrNoSuchTransaction</a> = <a href="#v:ErrNoSuchTransaction">ErrNoSuchTransaction</a> (<a href="Cardano-Wallet-Primitive-Types.html#t:Hash" title="Cardano.Wallet.Primitive.Types">Hash</a> &quot;Tx&quot;)</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ErrNoSuchWallet">ErrNoSuchWallet</a> = <a href="#v:ErrNoSuchWallet">ErrNoSuchWallet</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ErrWalletAlreadyExists">ErrWalletAlreadyExists</a> = <a href="#v:ErrWalletAlreadyExists">ErrWalletAlreadyExists</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Interface</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DBLayer" class="def">DBLayer</a> m s t k <a href="src/Cardano.Wallet.DB.html#DBLayer" class="link">Source</a> <a href="#t:DBLayer" class="selflink">#</a></p><div class="doc"><p>A Database interface for storing various things in a DB. In practice,
 we'll need some extra contraints on the wallet state that allows us to
 serialize and unserialize it (e.g. <code>forall s. (Serialize s) =&gt; ...</code>)</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DBLayer" class="def">DBLayer</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:createWallet" class="def">createWallet</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="Cardano-Wallet-Primitive-Model.html#t:Wallet" title="Cardano.Wallet.Primitive.Model">Wallet</a> s t -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:WalletMetadata" title="Cardano.Wallet.Primitive.Types">WalletMetadata</a> -&gt; [(<a href="Cardano-Wallet-Primitive-Types.html#t:Tx" title="Cardano.Wallet.Primitive.Types">Tx</a> t, <a href="Cardano-Wallet-Primitive-Types.html#t:TxMeta" title="Cardano.Wallet.Primitive.Types">TxMeta</a>)] -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a> m ()</dfn><div class="doc"><p>Initialize a database entry for a given wallet. <code><a href="Cardano-Wallet-DB.html#v:putCheckpoint" title="Cardano.Wallet.DB">putCheckpoint</a></code>,
 <code><a href="Cardano-Wallet-DB.html#v:putWalletMeta" title="Cardano.Wallet.DB">putWalletMeta</a></code> or <code><a href="Cardano-Wallet-DB.html#v:putTxHistory" title="Cardano.Wallet.DB">putTxHistory</a></code> will actually all fail if they are
 called _first_ on a wallet.</p></div></li><li><dfn class="src"><a id="v:removeWallet" class="def">removeWallet</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</dfn><div class="doc"><p>Remove a given wallet and all its associated data (checkpoints,
 metadata, tx history ...)</p></div></li><li><dfn class="src"><a id="v:listWallets" class="def">listWallets</a> :: m [<a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a>]</dfn><div class="doc"><p>Get the list of all known wallets in the DB, possibly empty.</p></div></li><li><dfn class="src"><a id="v:putCheckpoint" class="def">putCheckpoint</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="Cardano-Wallet-Primitive-Model.html#t:Wallet" title="Cardano.Wallet.Primitive.Model">Wallet</a> s t -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</dfn><div class="doc"><p>Replace the current checkpoint for a given wallet. We do not handle
 rollbacks yet, and therefore only stores the latest available
 checkpoint.</p><p>If the wallet doesn't exist, this operation returns an error.</p></div></li><li><dfn class="src"><a id="v:readCheckpoint" class="def">readCheckpoint</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; m (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (<a href="Cardano-Wallet-Primitive-Model.html#t:Wallet" title="Cardano.Wallet.Primitive.Model">Wallet</a> s t))</dfn><div class="doc"><p>Fetch the most recent checkpoint of a given wallet.</p><p>Return <code><a href="../base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code> if there's no such wallet.</p></div></li><li><dfn class="src"><a id="v:listCheckpoints" class="def">listCheckpoints</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; m [<a href="Cardano-Wallet-Primitive-Types.html#t:BlockHeader" title="Cardano.Wallet.Primitive.Types">BlockHeader</a>]</dfn><div class="doc"><p>List all known checkpoint tips, ordered by slot ids from the oldest
 to the newest.</p></div></li><li><dfn class="src"><a id="v:putWalletMeta" class="def">putWalletMeta</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:WalletMetadata" title="Cardano.Wallet.Primitive.Types">WalletMetadata</a> -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</dfn><div class="doc"><p>Replace an existing wallet metadata with the given one.</p><p>If the wallet doesn't exist, this operation returns an error</p></div></li><li><dfn class="src"><a id="v:readWalletMeta" class="def">readWalletMeta</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; m (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletMetadata" title="Cardano.Wallet.Primitive.Types">WalletMetadata</a>)</dfn><div class="doc"><p>Fetch a wallet metadata, if they exist.</p><p>Return <code><a href="../base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code> if there's no such wallet.</p></div></li><li><dfn class="src"><a id="v:putTxHistory" class="def">putTxHistory</a> :: <a href="Cardano-Wallet-Primitive-Types.html#t:DefineTx" title="Cardano.Wallet.Primitive.Types">DefineTx</a> t =&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; [(<a href="Cardano-Wallet-Primitive-Types.html#t:Tx" title="Cardano.Wallet.Primitive.Types">Tx</a> t, <a href="Cardano-Wallet-Primitive-Types.html#t:TxMeta" title="Cardano.Wallet.Primitive.Types">TxMeta</a>)] -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</dfn><div class="doc"><p>Augments the transaction history for a known wallet.</p><p>If an entry for a particular transaction already exists it is not
 altered nor merged (just ignored).</p><p>If the wallet doesn't exist, this operation returns an error.</p></div></li><li><dfn class="src"><a id="v:readTxHistory" class="def">readTxHistory</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:SortOrder" title="Cardano.Wallet.Primitive.Types">SortOrder</a> -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:Range" title="Cardano.Wallet.Primitive.Types">Range</a> <a href="Cardano-Wallet-Primitive-Types.html#t:SlotId" title="Cardano.Wallet.Primitive.Types">SlotId</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Cardano-Wallet-Primitive-Types.html#t:TxStatus" title="Cardano.Wallet.Primitive.Types">TxStatus</a> -&gt; m [(<a href="Cardano-Wallet-Primitive-Types.html#t:Tx" title="Cardano.Wallet.Primitive.Types">Tx</a> t, <a href="Cardano-Wallet-Primitive-Types.html#t:TxMeta" title="Cardano.Wallet.Primitive.Types">TxMeta</a>)]</dfn><div class="doc"><p>Fetch the current transaction history of a known wallet, ordered by
 descending slot number.</p><p>Returns an empty list if the wallet isn't found.</p></div></li><li><dfn class="src"><a id="v:putPrivateKey" class="def">putPrivateKey</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; (k <a href="Cardano-Wallet-Primitive-AddressDerivation.html#v:RootK" title="Cardano.Wallet.Primitive.AddressDerivation">RootK</a> <a href="Cardano-Wallet-Primitive-AddressDerivation.html#t:XPrv" title="Cardano.Wallet.Primitive.AddressDerivation">XPrv</a>, <a href="Cardano-Wallet-Primitive-Types.html#t:Hash" title="Cardano.Wallet.Primitive.Types">Hash</a> &quot;encryption&quot;) -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</dfn><div class="doc"><p>Store or replace a private key for a given wallet. Note that wallet
 _could_ be stored and manipulated without any private key associated
 to it. A private key is only seldomly required for very specific
 operations (like transaction signing).</p></div></li><li><dfn class="src"><a id="v:readPrivateKey" class="def">readPrivateKey</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; m (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> (k <a href="Cardano-Wallet-Primitive-AddressDerivation.html#v:RootK" title="Cardano.Wallet.Primitive.AddressDerivation">RootK</a> <a href="Cardano-Wallet-Primitive-AddressDerivation.html#t:XPrv" title="Cardano.Wallet.Primitive.AddressDerivation">XPrv</a>, <a href="Cardano-Wallet-Primitive-Types.html#t:Hash" title="Cardano.Wallet.Primitive.Types">Hash</a> &quot;encryption&quot;))</dfn><div class="doc"><p>Read a previously stored private key and its associated passphrase
 hash.</p></div></li><li><dfn class="src"><a id="v:rollbackTo" class="def">rollbackTo</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="Cardano-Wallet-Primitive-Types.html#t:SlotId" title="Cardano.Wallet.Primitive.Types">SlotId</a> -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</dfn><div class="doc"><p>Drops all checkpoints and transaction data after the given slot.</p></div></li><li><dfn class="src"><a id="v:prune" class="def">prune</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> m ()</dfn><div class="doc"><p>Prune database entities and remove entities that can be discarded.</p></div></li><li><dfn class="src"><a id="v:withLock" class="def">withLock</a> :: <span class="keyword">forall</span> e a. <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e m a -&gt; <a href="../mtl-2.2.2/Control-Monad-Except.html#t:ExceptT" title="Control.Monad.Except">ExceptT</a> e m a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:DBLayer" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DBLayer:HasWorkerCtx:1"></span> <a href="Cardano-Wallet-Registry.html#t:HasWorkerCtx" title="Cardano.Wallet.Registry">HasWorkerCtx</a> (<a href="Cardano-Wallet-DB.html#t:DBLayer" title="Cardano.Wallet.DB">DBLayer</a> <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> s t k) (<a href="Cardano-Wallet-Api.html#t:ApiLayer" title="Cardano.Wallet.Api">ApiLayer</a> s t k)</span> <a href="src/Cardano.Wallet.Api.html#line-346" class="link">Source</a> <a href="#t:HasWorkerCtx" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DBLayer:HasWorkerCtx:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-Api.html">Cardano.Wallet.Api</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Cardano-Wallet-Registry.html#t:WorkerCtx" title="Cardano.Wallet.Registry">WorkerCtx</a> (<a href="Cardano-Wallet-Api.html#t:ApiLayer" title="Cardano.Wallet.Api">ApiLayer</a> s t k) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="src/Cardano.Wallet.Registry.html#WorkerCtx" class="link">Source</a> <a href="#t:WorkerCtx" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:hoistResource">hoistResource</a> :: <a href="Cardano-Wallet-DB.html#t:DBLayer" title="Cardano.Wallet.DB">DBLayer</a> <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> s t k -&gt; <a href="Cardano-Wallet-Api.html#t:ApiLayer" title="Cardano.Wallet.Api">ApiLayer</a> s t k -&gt; <a href="Cardano-Wallet-Registry.html#t:WorkerCtx" title="Cardano.Wallet.Registry">WorkerCtx</a> (<a href="Cardano-Wallet-Api.html#t:ApiLayer" title="Cardano.Wallet.Api">ApiLayer</a> s t k) <a href="src/Cardano.Wallet.Registry.html#hoistResource" class="link">Source</a> <a href="#v:hoistResource" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DBFactory" class="def">DBFactory</a> m s t k <a href="src/Cardano.Wallet.DB.html#DBFactory" class="link">Source</a> <a href="#t:DBFactory" class="selflink">#</a></p><div class="doc"><p>Instantiate database layers at will</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DBFactory" class="def">DBFactory</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:withDatabase" class="def">withDatabase</a> :: <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; (<a href="Cardano-Wallet-DB.html#t:DBLayer" title="Cardano.Wallet.DB">DBLayer</a> m s t k -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</dfn><div class="doc"><p>Creates a new or use an existing database, maintaining an open
 connection so long as necessary</p></div></li><li><dfn class="src"><a id="v:removeDatabase" class="def">removeDatabase</a> :: <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</dfn><div class="doc"><p>Erase any trace of the database</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:DBFactory" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DBFactory:Generic:1"></span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> (<a href="Cardano-Wallet-DB.html#t:DBFactory" title="Cardano.Wallet.DB">DBFactory</a> m s t k)</span> <a href="src/Cardano.Wallet.DB.html#line-65" class="link">Source</a> <a href="#t:DBFactory" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DBFactory:Generic:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-Wallet-DB.html#t:DBFactory" title="Cardano.Wallet.DB">DBFactory</a> m s t k) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Cardano-Wallet-DB.html#t:DBFactory" title="Cardano.Wallet.DB">DBFactory</a> m s t k -&gt; <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-Wallet-DB.html#t:DBFactory" title="Cardano.Wallet.DB">DBFactory</a> m s t k) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-Wallet-DB.html#t:DBFactory" title="Cardano.Wallet.DB">DBFactory</a> m s t k) x -&gt; <a href="Cardano-Wallet-DB.html#t:DBFactory" title="Cardano.Wallet.DB">DBFactory</a> m s t k <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DBFactory:Rep:2"></span> <span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-Wallet-DB.html#t:DBFactory" title="Cardano.Wallet.DB">DBFactory</a> m s t k)</span> <a href="src/Cardano.Wallet.DB.html#line-65" class="link">Source</a> <a href="#t:DBFactory" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DBFactory:Rep:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-Wallet-DB.html#t:DBFactory" title="Cardano.Wallet.DB">DBFactory</a> m s t k) = <a href="../base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;DBFactory&quot; &quot;Cardano.Wallet.DB&quot; &quot;cardano-wallet-core-2019.10.16-LUHRrJIIdKs74PBAQizTLw&quot; <a href="../base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;DBFactory&quot; <a href="../base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="../base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;withDatabase&quot;) <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; (<a href="Cardano-Wallet-DB.html#t:DBLayer" title="Cardano.Wallet.DB">DBLayer</a> m s t k -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ())) <a href="../base-4.12.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="../base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;removeDatabase&quot;) <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()))))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:PrimaryKey" class="def">PrimaryKey</a> key <a href="src/Cardano.Wallet.DB.html#PrimaryKey" class="link">Source</a> <a href="#t:PrimaryKey" class="selflink">#</a></p><div class="doc"><p>A primary key which can take many forms depending on the value. This may
 become a type family as we move forward, but for now, it illustrate that
 some queries are ran against some sort of store;</p><p>As a matter of fact, we may manipulate multiple wallets at the same time, so,
 functions like <code>enqueueCheckpoint</code> needs to be associated to a corresponding
 wallet. Some other may not because they are information valid for all wallets
 (like for instance, the last known network tip).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PrimaryKey" class="def">PrimaryKey</a> key</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:PrimaryKey" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PrimaryKey:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> key =&gt; <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key)</span> <a href="src/Cardano.Wallet.DB.html#line-208" class="link">Source</a> <a href="#t:PrimaryKey" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PrimaryKey:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PrimaryKey:Ord:2"></span> <a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> key =&gt; <a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> (<a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key)</span> <a href="src/Cardano.Wallet.DB.html#line-208" class="link">Source</a> <a href="#t:PrimaryKey" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PrimaryKey:Ord:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="../base-4.12.0.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key <a href="#v:min" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PrimaryKey:Show:3"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> key =&gt; <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key)</span> <a href="src/Cardano.Wallet.DB.html#line-208" class="link">Source</a> <a href="#t:PrimaryKey" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PrimaryKey:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Wallet-DB.html#t:PrimaryKey" title="Cardano.Wallet.DB">PrimaryKey</a> key] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:cleanDB" class="def">cleanDB</a> :: <a href="../base-4.12.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Cardano-Wallet-DB.html#t:DBLayer" title="Cardano.Wallet.DB">DBLayer</a> m s t k -&gt; m () <a href="src/Cardano.Wallet.DB.html#cleanDB" class="link">Source</a> <a href="#v:cleanDB" class="selflink">#</a></p><div class="doc"><p>Clean a database by removing all wallets.</p></div></div><a href="#g:2" id="g:2"><h1>Checkpoints</h1></a><div class="top"><p class="src"><a id="v:sparseCheckpoints" class="def">sparseCheckpoints</a> <a href="src/Cardano.Wallet.DB.html#sparseCheckpoints" class="link">Source</a> <a href="#v:sparseCheckpoints" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Data-Quantity.html#t:Quantity" title="Data.Quantity">Quantity</a> &quot;block&quot; <a href="../base-4.12.0.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a></td><td class="doc"><p>Epoch Stability, i.e. how far we can rollback</p></td></tr><tr><td class="src">-&gt; <a href="Data-Quantity.html#t:Quantity" title="Data.Quantity">Quantity</a> &quot;block&quot; <a href="../base-4.12.0.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a></td><td class="doc"><p>A given block height</p></td></tr><tr><td class="src">-&gt; [<a href="../base-4.12.0.0/Data-Word.html#t:Word32" title="Data.Word">Word32</a>]</td><td class="doc"><p>The list of checkpoint heights that should be kept in DB.</p></td></tr></table></div><div class="doc"><p>Storing EVERY checkpoints in the database is quite expensive and useless.
 We make the following assumptions:</p><ul><li>We can't rollback for more than `k=epochStability` blocks in the past</li><li>It is pretty fast to re-sync a few hundred blocks</li><li>Small rollbacks may occur more often than long one</li></ul><p>So, as we insert checkpoints, we make sure to:</p><ul><li>Prune any checkpoint that more than <code>k</code> blocks in the past</li><li>Keep only one checkpoint every 100 blocks</li><li>But still keep ~10 most recent checkpoints to cope with small rollbacks</li></ul><p><strong>Example 1</strong>: Inserting <code>cp153</code></p><p>&#8505;: <code>cp142</code> is discarded and <code>cp153</code> inserted.</p><pre> Currently in DB:
&#9484;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9516;&#9472;  &#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9488;
&#9474;cp000 &#9474;cp100 &#9474;cp142 &#9474;..    ..&#9474;cp152 &#9474;
&#9492;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9524;&#9472;  &#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9496;
 Want in DB:
&#9484;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9516;&#9472;  &#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9488;
&#9474;cp000 &#9474;cp100 &#9474;cp143 &#9474;..    ..&#9474;cp153 &#9474;
&#9492;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9524;&#9472;  &#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9496;
 </pre><p><strong>Example 2</strong>: Inserting <code>cp111</code></p><p>&#8505;: <code>cp100</code> is kept and <code>cp111</code> inserted.</p><pre> Currently in DB:
&#9484;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9516;&#9472;  &#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9488;
&#9474;cp000 &#9474;cp100 &#9474;cp101 &#9474;..    ..&#9474;cp110 &#9474;
&#9492;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9524;&#9472;  &#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9496;
 Want in DB:
&#9484;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9516;&#9472;  &#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9488;
&#9474;cp000 &#9474;cp100 &#9474;cp101 &#9474;..    ..&#9474;cp111 &#9474;
&#9492;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9524;&#9472;  &#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9496;
 </pre><p>NOTE: There might be cases where the chain following &quot;fails&quot; (because, for
 example, the node has switch to a different chain, different by more than k),
 and in such cases, we have no choice but rolling back from genesis.
 Therefore, we need to keep the very first checkpoint in the database, no
 matter what.</p></div></div><a href="#g:3" id="g:3"><h1>Errors</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ErrNoSuchTransaction" class="def">ErrNoSuchTransaction</a> <a href="src/Cardano.Wallet.DB.html#ErrNoSuchTransaction" class="link">Source</a> <a href="#t:ErrNoSuchTransaction" class="selflink">#</a></p><div class="doc"><p>Can't perform given operation because there's no transaction</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ErrNoSuchTransaction" class="def">ErrNoSuchTransaction</a> (<a href="Cardano-Wallet-Primitive-Types.html#t:Hash" title="Cardano.Wallet.Primitive.Types">Hash</a> &quot;Tx&quot;)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:ErrNoSuchTransaction" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrNoSuchTransaction:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchTransaction" title="Cardano.Wallet.DB">ErrNoSuchTransaction</a></span> <a href="src/Cardano.Wallet.DB.html#line-192" class="link">Source</a> <a href="#t:ErrNoSuchTransaction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrNoSuchTransaction:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Wallet-DB.html#t:ErrNoSuchTransaction" title="Cardano.Wallet.DB">ErrNoSuchTransaction</a> -&gt; <a href="Cardano-Wallet-DB.html#t:ErrNoSuchTransaction" title="Cardano.Wallet.DB">ErrNoSuchTransaction</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Wallet-DB.html#t:ErrNoSuchTransaction" title="Cardano.Wallet.DB">ErrNoSuchTransaction</a> -&gt; <a href="Cardano-Wallet-DB.html#t:ErrNoSuchTransaction" title="Cardano.Wallet.DB">ErrNoSuchTransaction</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrNoSuchTransaction:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchTransaction" title="Cardano.Wallet.DB">ErrNoSuchTransaction</a></span> <a href="src/Cardano.Wallet.DB.html#line-192" class="link">Source</a> <a href="#t:ErrNoSuchTransaction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrNoSuchTransaction:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-Wallet-DB.html#t:ErrNoSuchTransaction" title="Cardano.Wallet.DB">ErrNoSuchTransaction</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Wallet-DB.html#t:ErrNoSuchTransaction" title="Cardano.Wallet.DB">ErrNoSuchTransaction</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Wallet-DB.html#t:ErrNoSuchTransaction" title="Cardano.Wallet.DB">ErrNoSuchTransaction</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ErrNoSuchWallet" class="def">ErrNoSuchWallet</a> <a href="src/Cardano.Wallet.DB.html#ErrNoSuchWallet" class="link">Source</a> <a href="#t:ErrNoSuchWallet" class="selflink">#</a></p><div class="doc"><p>Can't perform given operation because there's no wallet</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ErrNoSuchWallet" class="def">ErrNoSuchWallet</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:ErrNoSuchWallet" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrNoSuchWallet:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a></span> <a href="src/Cardano.Wallet.DB.html#line-187" class="link">Source</a> <a href="#t:ErrNoSuchWallet" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrNoSuchWallet:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> -&gt; <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> -&gt; <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrNoSuchWallet:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a></span> <a href="src/Cardano.Wallet.DB.html#line-187" class="link">Source</a> <a href="#t:ErrNoSuchWallet" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrNoSuchWallet:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Wallet-DB.html#t:ErrNoSuchWallet" title="Cardano.Wallet.DB">ErrNoSuchWallet</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ErrWalletAlreadyExists" class="def">ErrWalletAlreadyExists</a> <a href="src/Cardano.Wallet.DB.html#ErrWalletAlreadyExists" class="link">Source</a> <a href="#t:ErrWalletAlreadyExists" class="selflink">#</a></p><div class="doc"><p>Forbidden operation was executed on an already existing wallet</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ErrWalletAlreadyExists" class="def">ErrWalletAlreadyExists</a> <a href="Cardano-Wallet-Primitive-Types.html#t:WalletId" title="Cardano.Wallet.Primitive.Types">WalletId</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:ErrWalletAlreadyExists" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrWalletAlreadyExists:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a></span> <a href="src/Cardano.Wallet.DB.html#line-197" class="link">Source</a> <a href="#t:ErrWalletAlreadyExists" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrWalletAlreadyExists:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a> -&gt; <a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a> -&gt; <a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrWalletAlreadyExists:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a></span> <a href="src/Cardano.Wallet.DB.html#line-197" class="link">Source</a> <a href="#t:ErrWalletAlreadyExists" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrWalletAlreadyExists:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-Wallet-DB.html">Cardano.Wallet.DB</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Wallet-DB.html#t:ErrWalletAlreadyExists" title="Cardano.Wallet.DB">ErrWalletAlreadyExists</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>